{"version":3,"sources":["webpack:///./src/modules/vuex/pages/index.vue?a581","webpack:///./src/modules/vuex/components/lists.vue?5044","webpack:///src/modules/vuex/components/lists.vue","webpack:///./src/modules/vuex/components/lists.vue?4f98","webpack:///./src/modules/vuex/components/lists.vue","webpack:///src/modules/vuex/pages/index.vue","webpack:///./src/modules/vuex/pages/index.vue?a590","webpack:///./src/modules/vuex/pages/index.vue","webpack:///./node_modules/store2/dist/store2.js"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","loading","topics","data","on","loadMore","staticRenderFns","staticClass","_l","item","key","id","domProps","_s","title","_v","$event","$emit","component","window","define","_","version","areas","apis","inherit","api","o","p","hasOwnProperty","Object","defineProperty","getOwnPropertyDescriptor","stringify","d","undefined","JSON","parse","s","fn","revive","e","name","storeAPI","get","area","getItem","set","string","setItem","remove","removeItem","i","length","clear","Store","namespace","store","overwrite","arguments","getAll","transact","each","setAll","_id","testKey","_area","storage","_ns","singleArea","substring","ns","isFake","toString","has","_in","size","keys","fill","m","_out","call","fillList","k","v","list","push","alt","fillObj","all","val","ret","changed","add","Array","concat","type","clearAll","indexOf","storageAPI","items","c","localStorage","local","sessionStorage","amd","module","exports","conflict"],"mappings":"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","file":"js/vuex-index.912810e3.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('modules',{attrs:{\"loading\":_vm.loading,\"topics\":_vm.topics.data},on:{\"loadMore\":_vm.loadMore}})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('ul',{staticClass:\"topics\"},_vm._l((_vm.topics),function(item){return _c('li',{key:item.id},[_c('router-link',{attrs:{\"to\":(\"/view/\" + (item.id))},domProps:{\"textContent\":_vm._s(item.title)}})],1)}),0),_c('div',{staticClass:\"pages\"},[(_vm.loading)?_c('a',{attrs:{\"href\":\"javascript:;\"}},[_vm._v(\"加载中...\")]):_c('a',{attrs:{\"href\":\"javascript:;\"},on:{\"click\":function($event){return _vm.$emit('loadMore')}}},[_vm._v(\"加载更多...\")])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <div>\n        <ul class=\"topics\">\n            <li v-for=\"item in topics\" :key=\"item.id\"><router-link :to=\"`/view/${item.id}`\" v-text=\"item.title\"></router-link></li>\n        </ul>\n        <div class=\"pages\">\n            <a v-if=\"loading\" href=\"javascript:;\">加载中...</a> <a v-else @click=\"$emit('loadMore')\" href=\"javascript:;\">加载更多...</a>\n        </div>\n    </div>\n</template>\n<script>\nexport default {\n    props: ['topics', 'loading']\n}\n</script>\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./lists.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./lists.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./lists.vue?vue&type=template&id=3cbebd54&\"\nimport script from \"./lists.vue?vue&type=script&lang=js&\"\nexport * from \"./lists.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\n    <modules @loadMore=\"loadMore\" :loading=\"loading\" :topics=\"topics.data\" />\n</template>\n<script>\nimport { mapGetters } from 'vuex'\nimport ls from 'store2'\n\nimport modules from '../components/lists.vue'\n\nexport default {\n    name: 'vuex-index',\n    components: {\n        modules\n    },\n    data() {\n        return {\n            loading: false\n        }\n    },\n    computed: {\n        ...mapGetters({\n            topics: 'topics/getTopics'\n        })\n    },\n    async mounted() {\n        await this.$store.dispatch('topics/getTopics', { page: 1 })\n        await this.$nextTick()\n        const path = this.$route.path\n        const scrollTop = ls.get(path) || 0\n        ls.remove(path)\n        window.scrollTo(0, scrollTop)\n    },\n    methods: {\n        async loadMore() {\n            this.loading = true\n            const page = this.topics.page + 1\n            await this.$store.dispatch('topics/getTopics', { page })\n            this.loading = false\n        }\n    },\n    beforeRouteLeave(to, from, next) {\n        const scrollTop = Math.max(window.pageYOffset, document.documentElement.scrollTop, document.body.scrollTop)\n        const path = from.path\n        if (scrollTop) ls.set(path, scrollTop)\n        else ls.remove(path)\n        next()\n    },\n    metaInfo() {\n        return {\n            title: '这个是带vuex的模块 - ' + this.topics.page\n        }\n    }\n}\n</script>\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=a1b0b342&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","/*! store2 - v2.12.0 - 2020-08-12\n* Copyright (c) 2020 Nathan Bubna; Licensed (MIT OR GPL-3.0) */\n;(function(window, define) {\n    var _ = {\n        version: \"2.12.0\",\n        areas: {},\n        apis: {},\n\n        // utilities\n        inherit: function(api, o) {\n            for (var p in api) {\n                if (!o.hasOwnProperty(p)) {\n                    Object.defineProperty(o, p, Object.getOwnPropertyDescriptor(api, p));\n                }\n            }\n            return o;\n        },\n        stringify: function(d) {\n            return d === undefined || typeof d === \"function\" ? d+'' : JSON.stringify(d);\n        },\n        parse: function(s, fn) {\n            // if it doesn't parse, return as is\n            try{ return JSON.parse(s,fn||_.revive); }catch(e){ return s; }\n        },\n\n        // extension hooks\n        fn: function(name, fn) {\n            _.storeAPI[name] = fn;\n            for (var api in _.apis) {\n                _.apis[api][name] = fn;\n            }\n        },\n        get: function(area, key){ return area.getItem(key); },\n        set: function(area, key, string){ area.setItem(key, string); },\n        remove: function(area, key){ area.removeItem(key); },\n        key: function(area, i){ return area.key(i); },\n        length: function(area){ return area.length; },\n        clear: function(area){ area.clear(); },\n\n        // core functions\n        Store: function(id, area, namespace) {\n            var store = _.inherit(_.storeAPI, function(key, data, overwrite) {\n                if (arguments.length === 0){ return store.getAll(); }\n                if (typeof data === \"function\"){ return store.transact(key, data, overwrite); }// fn=data, alt=overwrite\n                if (data !== undefined){ return store.set(key, data, overwrite); }\n                if (typeof key === \"string\" || typeof key === \"number\"){ return store.get(key); }\n                if (typeof key === \"function\"){ return store.each(key); }\n                if (!key){ return store.clear(); }\n                return store.setAll(key, data);// overwrite=data, data=key\n            });\n            store._id = id;\n            try {\n                var testKey = '__store2_test';\n                area.setItem(testKey, 'ok');\n                store._area = area;\n                area.removeItem(testKey);\n            } catch (e) {\n                store._area = _.storage('fake');\n            }\n            store._ns = namespace || '';\n            if (!_.areas[id]) {\n                _.areas[id] = store._area;\n            }\n            if (!_.apis[store._ns+store._id]) {\n                _.apis[store._ns+store._id] = store;\n            }\n            return store;\n        },\n        storeAPI: {\n            // admin functions\n            area: function(id, area) {\n                var store = this[id];\n                if (!store || !store.area) {\n                    store = _.Store(id, area, this._ns);//new area-specific api in this namespace\n                    if (!this[id]){ this[id] = store; }\n                }\n                return store;\n            },\n            namespace: function(namespace, singleArea) {\n                if (!namespace){\n                    return this._ns ? this._ns.substring(0,this._ns.length-1) : '';\n                }\n                var ns = namespace, store = this[ns];\n                if (!store || !store.namespace) {\n                    store = _.Store(this._id, this._area, this._ns+ns+'.');//new namespaced api\n                    if (!this[ns]){ this[ns] = store; }\n                    if (!singleArea) {\n                        for (var name in _.areas) {\n                            store.area(name, _.areas[name]);\n                        }\n                    }\n                }\n                return store;\n            },\n            isFake: function(){ return this._area.name === 'fake'; },\n            toString: function() {\n                return 'store'+(this._ns?'.'+this.namespace():'')+'['+this._id+']';\n            },\n\n            // storage functions\n            has: function(key) {\n                if (this._area.has) {\n                    return this._area.has(this._in(key));//extension hook\n                }\n                return !!(this._in(key) in this._area);\n            },\n            size: function(){ return this.keys().length; },\n            each: function(fn, fill) {// fill is used by keys(fillList) and getAll(fillList))\n                for (var i=0, m=_.length(this._area); i<m; i++) {\n                    var key = this._out(_.key(this._area, i));\n                    if (key !== undefined) {\n                        if (fn.call(this, key, this.get(key), fill) === false) {\n                            break;\n                        }\n                    }\n                    if (m > _.length(this._area)) { m--; i--; }// in case of removeItem\n                }\n                return fill || this;\n            },\n            keys: function(fillList) {\n                return this.each(function(k, v, list){ list.push(k); }, fillList || []);\n            },\n            get: function(key, alt) {\n                var s = _.get(this._area, this._in(key)),\n                    fn;\n                if (typeof alt === \"function\") {\n                    fn = alt;\n                    alt = null;\n                }\n                return s !== null ? _.parse(s, fn) :\n                    alt != null ? alt : s;\n            },\n            getAll: function(fillObj) {\n                return this.each(function(k, v, all){ all[k] = v; }, fillObj || {});\n            },\n            transact: function(key, fn, alt) {\n                var val = this.get(key, alt),\n                    ret = fn(val);\n                this.set(key, ret === undefined ? val : ret);\n                return this;\n            },\n            set: function(key, data, overwrite) {\n                var d = this.get(key);\n                if (d != null && overwrite === false) {\n                    return data;\n                }\n                return _.set(this._area, this._in(key), _.stringify(data), overwrite) || d;\n            },\n            setAll: function(data, overwrite) {\n                var changed, val;\n                for (var key in data) {\n                    val = data[key];\n                    if (this.set(key, val, overwrite) !== val) {\n                        changed = true;\n                    }\n                }\n                return changed;\n            },\n            add: function(key, data) {\n                var d = this.get(key);\n                if (d instanceof Array) {\n                    data = d.concat(data);\n                } else if (d !== null) {\n                    var type = typeof d;\n                    if (type === typeof data && type === 'object') {\n                        for (var k in data) {\n                            d[k] = data[k];\n                        }\n                        data = d;\n                    } else {\n                        data = d + data;\n                    }\n                }\n                _.set(this._area, this._in(key), _.stringify(data));\n                return data;\n            },\n            remove: function(key, alt) {\n                var d = this.get(key, alt);\n                _.remove(this._area, this._in(key));\n                return d;\n            },\n            clear: function() {\n                if (!this._ns) {\n                    _.clear(this._area);\n                } else {\n                    this.each(function(k){ _.remove(this._area, this._in(k)); }, 1);\n                }\n                return this;\n            },\n            clearAll: function() {\n                var area = this._area;\n                for (var id in _.areas) {\n                    if (_.areas.hasOwnProperty(id)) {\n                        this._area = _.areas[id];\n                        this.clear();\n                    }\n                }\n                this._area = area;\n                return this;\n            },\n\n            // internal use functions\n            _in: function(k) {\n                if (typeof k !== \"string\"){ k = _.stringify(k); }\n                return this._ns ? this._ns + k : k;\n            },\n            _out: function(k) {\n                return this._ns ?\n                    k && k.indexOf(this._ns) === 0 ?\n                        k.substring(this._ns.length) :\n                        undefined : // so each() knows to skip it\n                    k;\n            }\n        },// end _.storeAPI\n        storage: function(name) {\n            return _.inherit(_.storageAPI, { items: {}, name: name });\n        },\n        storageAPI: {\n            length: 0,\n            has: function(k){ return this.items.hasOwnProperty(k); },\n            key: function(i) {\n                var c = 0;\n                for (var k in this.items){\n                    if (this.has(k) && i === c++) {\n                        return k;\n                    }\n                }\n            },\n            setItem: function(k, v) {\n                if (!this.has(k)) {\n                    this.length++;\n                }\n                this.items[k] = v;\n            },\n            removeItem: function(k) {\n                if (this.has(k)) {\n                    delete this.items[k];\n                    this.length--;\n                }\n            },\n            getItem: function(k){ return this.has(k) ? this.items[k] : null; },\n            clear: function(){ for (var k in this.items){ this.removeItem(k); } }\n        }// end _.storageAPI\n    };\n\n    var store =\n        // safely set this up (throws error in IE10/32bit mode for local files)\n        _.Store(\"local\", (function(){try{ return localStorage; }catch(e){}})());\n    store.local = store;// for completeness\n    store._ = _;// for extenders and debuggers...\n    // safely setup store.session (throws exception in FF for file:/// urls)\n    store.area(\"session\", (function(){try{ return sessionStorage; }catch(e){}})());\n    store.area(\"page\", _.storage(\"page\"));\n\n    if (typeof define === 'function' && define.amd !== undefined) {\n        define('store2', [], function () {\n            return store;\n        });\n    } else if (typeof module !== 'undefined' && module.exports) {\n        module.exports = store;\n    } else {\n        // expose the primary store fn to the global object and save conflicts\n        if (window.store){ _.conflict = window.store; }\n        window.store = store;\n    }\n\n})(this, this && this.define);\n"],"sourceRoot":""}